"use strict";var p=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var h=(a,e)=>{for(var r in e)p(a,r,{get:e[r],enumerable:!0})},_=(a,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of b(e))!d.call(a,t)&&t!==r&&p(a,t,{get:()=>e[t],enumerable:!(s=m(e,t))||s.enumerable});return a};var g=a=>_(p({},"__esModule",{value:!0}),a);var w={};h(w,{default:()=>l});module.exports=g(w);var c=class{manifestPath;constructor(e){this.manifestPath=e.manifestPath}loaders(){let e=(s,t)=>{if(s.startsWith("content_scripts")){let[,i]=s.split("/");return`web_accessible_resources/resource-${i.split("-")[1]}/[name][ext]`}return`${t}/[name][ext]`};return[{test:/\.(png|jpg|jpeg|gif|webp|avif|ico|bmp|svg)$/i,type:"asset/resource",generator:{filename:({runtime:s})=>e(s,"assets")},parser:{dataUrlCondition:{maxSize:2048}}},{test:/\.(woff|woff2|eot|ttf|otf)$/i,type:"asset/resource",generator:{filename:({runtime:s})=>e(s,"assets")}},{test:/\.(txt|md|csv|tsv|xml|pdf|docx|doc|xls|xlsx|ppt|pptx|zip|gz|gzip|tgz)$/i,type:"asset/resource",generator:{filename:({runtime:s})=>e(s,"assets")},parser:{dataUrlCondition:{maxSize:2048}}},{test:/\.(csv|tsv)$/i,use:["csv-loader"],generator:{filename:({runtime:s})=>e(s,"assets")}}]}apply(e){let r=this.loaders();e.options.module?.rules.push(...r)}};var u=require("webpack"),n=class{manifestPath;constructor(e){this.manifestPath=e.manifestPath}addFolderToWebResourcesField(e){let r=e.manifest_version===2,s=e.manifest_version===3;if(r){if(!e.web_accessible_resources)e.web_accessible_resources=["web_accessible_resources/*"];else if(Array.isArray(e.web_accessible_resources)){let t="web_accessible_resources/*";e.web_accessible_resources.includes(t)||e.web_accessible_resources.push(t)}}else s&&(e.web_accessible_resources?Array.isArray(e.web_accessible_resources)&&e.web_accessible_resources.forEach((t,i)=>{let o=`web_accessible_resources/resource-${i}/*`;t.resources.includes(o)||t.resources.push(o)}):e.web_accessible_resources=[{resources:["web_accessible_resources/*"],matches:["<all_urls>"]}]);return e}apply(e){e.hooks.thisCompilation.tap("ResourcesPlugin (UpdateManifest)",r=>{r.hooks.processAssets.tap({name:"ResourcesPlugin (UpdateManifest)",stage:u.Compilation.PROCESS_ASSETS_STAGE_SUMMARIZE},s=>{if(r.errors.length>0)return;let t=s["manifest.json"]?JSON.parse(s["manifest.json"].source().toString()):require(this.manifestPath),i=this.addFolderToWebResourcesField(t),o=JSON.stringify(i,null,2),f=new u.sources.RawSource(o);s["manifest.json"]?r.updateAsset("manifest.json",f):r.emitAsset("manifest.json",f)})})}};var l=class{manifestPath;exclude;constructor(e){this.manifestPath=e.manifestPath,this.exclude=e.exclude}apply(e){new c({manifestPath:this.manifestPath,exclude:this.exclude}).apply(e),new n({manifestPath:this.manifestPath}).apply(e)}};

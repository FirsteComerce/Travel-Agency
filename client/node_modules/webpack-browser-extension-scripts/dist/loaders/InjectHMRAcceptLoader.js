"use strict";var y=Object.create;var a=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var E=(t,e)=>{for(var s in e)a(t,s,{get:e[s],enumerable:!0})},l=(t,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of A(e))!k.call(t,n)&&n!==s&&a(t,n,{get:()=>e[n],enumerable:!(r=b(e,n))||r.enumerable});return t};var d=(t,e,s)=>(s=t!=null?y(j(t)):{},l(e||!t||!t.__esModule?a(s,"default",{value:t,enumerable:!0}):s,t)),S=t=>l(a({},"__esModule",{value:!0}),t);var _={};E(_,{default:()=>R});module.exports=S(_);var c=d(require("path")),h=require("loader-utils"),x=require("schema-utils");var u=d(require("path")),m=d(require("fs"));function g(t){let e=u.default.join(t,"package.json");if(!m.default.existsSync(e))return!1;let s=require(e),r=s.devDependencies&&s.devDependencies.react,n=s.dependencies&&s.dependencies.react;return!!(r||n)}var C={type:"object",properties:{test:{type:"string"},manifestPath:{type:"string"}}};function R(t){let e=this.getOptions(),s=e.manifestPath,r=c.default.dirname(s),n=require(s);if((0,x.validate)(C,e,{name:"Inject HMR (content_script, user_scripts, and background.scripts) Accept code",baseDataPath:"options"}),this._compilation?.options.mode==="production")return t;let p=(0,h.urlToRequest)(this.resourcePath),f=`
if (import.meta.webpackHot) { import.meta.webpackHot.accept() };
  `;if(n.background&&n.background.scripts)for(let i of n.background.scripts){let o=c.default.resolve(r,i);if(p.includes(o))return`${f}${t}`}if(n.content_scripts&&!g(r)){for(let i of n.content_scripts)if(i.js)for(let o of i.js){let v=c.default.resolve(r,o);if(p.includes(v))return`${f}${t}`}}if(n.user_scripts)for(let i of n.user_scripts){let o=c.default.resolve(r,i);if(p.includes(o))return`${f}${t}`}return t}
